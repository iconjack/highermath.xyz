<!DOCTYPE html>
<html>
<head>
<title>Ken's Tetrahedron Circuit Puzzle</title>
<style>
    * {
        margin: 0;
        padding: 0;
    }
    body {
        background-color: white;;
    }
</style>
</head>
<body>
<canvas id='canvas' width=1000 height=1000></canvas>
<script>

let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');

let straws = [0,1,1,1,0,0];
let leds = Array(4);

let buttons = [
    {label:'A', key:'A', straws:[[0,1,2]]},
    {label:'B', key:'B', straws:[[0,1,2]]},
    {label:'C', key:'C', straws:[[0,1,2]]},
    {label:'D', key:'D', straws:[[0,1,2]]},
]

let pairs = [[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];

this.addEventListener("keydown", event => {
    let key = event.key.toUpperCase();
    switch (key) {
        case 'A':
            console.log('A');
            dirty();
            break;
        case 'B':
            console.log('B');
            break;
        default:
            console.log('errant key:  ' + event.key);
    } 
});

function dirty() {
    requestAnimationFrame(draw);
}

// function draw() {
//     console.log("frame");
//     with (ctx) {
//         beginPath();
//         fillStyle = '#D02098';
//         ellipse(500, 500, 200, 200, Math.PI/4, 0, 2*Math.PI);
//         fill();
//         stroke();
//     }
// }

// dirty();

class LED {
    constructor(color, size) {
        this.color = color;
        this.size = size;
        this.off();
    }

    on() {
        this.state = 1;
    }

    off() {
        this.state = 0;
    }


    draw() {
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 10;
        ctx.ellipse(0, 0, this.size, this.size, Math.PI/4, 0, 2*Math.PI);
        ctx.fill();
        // ctx.stroke();       
        ctx.restore();
    }
}

class Button {
    constructor(label, key, action) {
        this.label = label;
        this.key = key;
        this.action = action;
    }

    draw(x, y) {
        ctx.save();
        ctx.restore();
    }
}

class Site {
    constructor(neighbors) {
        // this.x = x;
        // this.y = y;
        this.neighbors = neighbors;
        this.led1 = new LED('#FF0000', 12);
        this.led0 = new LED('green', 12);
        this.button = new Button();
    }

    draw() {
        ctx.save();
        ctx.translate(15, 20);
        this.led1.draw();
        ctx.translate(15, 20);
        this.led0.draw();
        ctx.restore();
    }
}

let site = new Site(100, 100, []);
site.led0.off();

ctx.save();
ctx.translate(100, 100);
site.draw();
ctx.restore();


</script>
    
</body>
</html>
